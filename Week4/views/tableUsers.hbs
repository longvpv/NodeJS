<div id="content">

    <div class="container-fluid">
        <h1 class="h3 mb-2 text-gray-800">Users Table</h1>

        <div class="d-flex justify-content-center align-items-center w-100">
            <form class=" form-inline mr-auto ml-md-3 my-2 my-md-0 mw-100 navbar-search mx-5">
                <div class="input-group w-100">
                    <input type="text" class="form-control bg-light border-0" placeholder="Search for..."
                        aria-label="Search" aria-describedby="basic-addon2" name="searchText">
                    <div class="input-group-append">
                        <button class="btn btn-primary">
                            <i class="fas fa-search fa-sm"></i>
                        </button>
                    </div>
                </div>
            </form>
        </div>


        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">Users Table Example</h6>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                        <thead>
                            <tr>
                                <th>First Name</th>
                                <th>Last Name</th>
                                <th>Date of birth</th>
                                <th>Gender</th>
                                <th>Country</th>
                                <th>Phone Number</th>
                                <th>User Name</th>
                                <th>Email</th>
                                <th>Role</th>
                            </tr>
                        </thead>

                        <tbody>
                            {{#each users }}
                            <tr>
                                <td>{{firstName}}</td>
                                <td>{{lastName}}</td>
                                <td>{{dob}}</td>
                                <td>{{gender}}</td>
                                <td>{{country}}</td>
                                <td>{{phoneNumber}}</td>
                                <td>{{username}}</td>
                                <td>{{email}}</td>
                                <td>{{role}}</td>

                            </tr>
                            {{else}}
                            <td>No user !</td>
                            {{/each}}

                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>
    <script>
        const form = document.querySelector('form');
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const searchText = form.searchText.value
            try {
                const res = await fetch(`/userlist?filter=${JSON.stringify({ keyword: searchText })}`, {
                    method: 'GET',
                    headers: { 'Content-Type': 'application/json' }
                });

                const data = await res.json();
                console.log(data)

            } catch (error) {
                console.log(error)
            }
        })
    </script>

</div>